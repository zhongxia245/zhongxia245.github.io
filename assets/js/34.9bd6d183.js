(window.webpackJsonp=window.webpackJsonp||[]).push([[34],{170:function(a,e,t){"use strict";t.r(e);var n=t(0),s=Object(n.a)({},(function(){var a=this,e=a.$createElement,t=a._self._c||e;return t("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[t("h2",{attrs:{id:"一、背景"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#一、背景"}},[a._v("#")]),a._v(" 一、背景")]),a._v(" "),t("p",[a._v("刚开始接触 React 的时候，就知道有 Immutable 这个东西，是用来保证 state 不可变的。")]),a._v(" "),t("p",[a._v("Immutable 会创建一个不可变的对象，保证 State 的一致性。")]),a._v(" "),t("p",[a._v("这个是最基本的理解，也是以前的理解。 由于业务开发中没有使用到，因此没有具体学习到如何使用。")]),a._v(" "),t("p",[a._v("今天看到一个面试者的简历，上面有写到这个技术，因此了解下。")]),a._v(" "),t("h2",{attrs:{id:"二、immutable-介绍"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#二、immutable-介绍"}},[a._v("#")]),a._v(" 二、Immutable 介绍")]),a._v(" "),t("ol",[t("li",[a._v("和 React 同期出现的，但是光芒被 React 给掩盖了")]),a._v(" "),t("li",[a._v("是一个独立的库，什么框架都可以使用")]),a._v(" "),t("li",[a._v("意义在于它弥补了 Javascript 没有不可变数据结构的问题")])]),a._v(" "),t("p",[a._v("JavaScript 对象是引用类型")]),a._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("var obj = {a:10}\nvar obj1 = obj\nobj1.a = 20\n\nconsole.log(obj.a)                  // 20\n\n//====================================================\n// Jquery 里面深复制，合并对象的用法\nvar defaultConfig = { /* 默认值 */};\nvar config = $.extend({}, defaultConfig, initConfig);       // jQuery用法。initConfig是自定义值\nvar config = $.extend(true, {}, defaultConfig, initConfig); // 如果对象是多层的，就用到deep-copy了\n\n\n//====================================================\n// ES6\nObject.assign 相当于浅复制（只是复制了第一层，如果第二层的对象变化了。 还是有问题的）\n\nvar obj2 = {a:{name:'zhongxia'}}\nvar obj3 = Object.assign(obj2)\nobj3.a.name = 'hehe'\n\nconsole.log(obj2.a.name)            // hehe\n\n// 深复制则应该输出  obj2.a.name 还是 zhongxia\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br"),t("span",{staticClass:"line-number"},[a._v("2")]),t("br"),t("span",{staticClass:"line-number"},[a._v("3")]),t("br"),t("span",{staticClass:"line-number"},[a._v("4")]),t("br"),t("span",{staticClass:"line-number"},[a._v("5")]),t("br"),t("span",{staticClass:"line-number"},[a._v("6")]),t("br"),t("span",{staticClass:"line-number"},[a._v("7")]),t("br"),t("span",{staticClass:"line-number"},[a._v("8")]),t("br"),t("span",{staticClass:"line-number"},[a._v("9")]),t("br"),t("span",{staticClass:"line-number"},[a._v("10")]),t("br"),t("span",{staticClass:"line-number"},[a._v("11")]),t("br"),t("span",{staticClass:"line-number"},[a._v("12")]),t("br"),t("span",{staticClass:"line-number"},[a._v("13")]),t("br"),t("span",{staticClass:"line-number"},[a._v("14")]),t("br"),t("span",{staticClass:"line-number"},[a._v("15")]),t("br"),t("span",{staticClass:"line-number"},[a._v("16")]),t("br"),t("span",{staticClass:"line-number"},[a._v("17")]),t("br"),t("span",{staticClass:"line-number"},[a._v("18")]),t("br"),t("span",{staticClass:"line-number"},[a._v("19")]),t("br"),t("span",{staticClass:"line-number"},[a._v("20")]),t("br"),t("span",{staticClass:"line-number"},[a._v("21")]),t("br"),t("span",{staticClass:"line-number"},[a._v("22")]),t("br"),t("span",{staticClass:"line-number"},[a._v("23")]),t("br"),t("span",{staticClass:"line-number"},[a._v("24")]),t("br")])]),t("h2",{attrs:{id:"三、deep-copy-可以用，为什么还用-immutable"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#三、deep-copy-可以用，为什么还用-immutable"}},[a._v("#")]),a._v(" 三、Deep-Copy 可以用，为什么还用 Immutable?")]),a._v(" "),t("p",[a._v("差别在性能上面")]),a._v(" "),t("h3",{attrs:{id:"_3-1-deep-copy"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-1-deep-copy"}},[a._v("#")]),a._v(" 3.1 deep-copy")]),a._v(" "),t("p",[a._v("每次把整个对象复制一次")]),a._v(" "),t("h3",{attrs:{id:"_3-2-与-object-freeze、const-区别"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-2-与-object-freeze、const-区别"}},[a._v("#")]),a._v(" 3.2 与 Object.freeze、const 区别")]),a._v(" "),t("p",[a._v("Object.freeze 和 ES6 中新加入的 const 都可以达到防止对象被篡改的功能，但它们是 shallowCopy 的。对象层级一深就要特殊处理了。")]),a._v(" "),t("h3",{attrs:{id:"_3-3-immutable"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-3-immutable"}},[a._v("#")]),a._v(" 3.3 Immutable")]),a._v(" "),t("p",[a._v("Immutable 类似链表，添加一个新的节点，把旧节点的父子关系移动到新节点上。")]),a._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("var defaultConfig = Immutable.fromJS({ /* 默认值 */});\nvar config = defaultConfig.merge(initConfig);               // defaultConfig不会改变，返回新值给config\nvar config = defaultConfig.mergeDeep(initConfig);           // 深层merge\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br"),t("span",{staticClass:"line-number"},[a._v("2")]),t("br"),t("span",{staticClass:"line-number"},[a._v("3")]),t("br")])]),t("p",[t("img",{attrs:{src:"http://img.alicdn.com/tps/i2/TB1zzi_KXXXXXctXFXXbrb8OVXX-613-575.gif",alt:"image"}})]),a._v(" "),t("h2",{attrs:{id:"五、参考文章"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#五、参考文章"}},[a._v("#")]),a._v(" 五、参考文章")]),a._v(" "),t("ol",[t("li",[t("p",[t("a",{attrs:{href:"http://boke.io/immutable-js/",target:"_blank",rel:"noopener noreferrer"}},[a._v("《搞定 immutable.js》"),t("OutboundLink")],1)])]),a._v(" "),t("li",[t("p",[t("a",{attrs:{href:"https://www.zhihu.com/question/28016223",target:"_blank",rel:"noopener noreferrer"}},[a._v("《知乎：facebook immutable.js 意义何在，使用场景？》"),t("OutboundLink")],1)])]),a._v(" "),t("li",[t("p",[t("a",{attrs:{href:"https://segmentfault.com/a/1190000002909224",target:"_blank",rel:"noopener noreferrer"}},[a._v("笔记, immutable-js 基础操作"),t("OutboundLink")],1)])]),a._v(" "),t("li",[t("p",[t("a",{attrs:{href:"https://zhuanlan.zhihu.com/p/20295971",target:"_blank",rel:"noopener noreferrer"}},[a._v("Immutable 详解及 React 中实践"),t("OutboundLink")],1)])]),a._v(" "),t("li",[t("p",[t("a",{attrs:{href:"http://www.w3cplus.com/javascript/immutable-js.html",target:"_blank",rel:"noopener noreferrer"}},[a._v("《Immutable.js 初识》"),t("OutboundLink")],1)]),a._v(" "),t("blockquote",[t("p",[a._v("详细的 API 可以看这个")])])])])])}),[],!1,null,null,null);e.default=s.exports}}]);