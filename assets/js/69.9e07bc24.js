(window.webpackJsonp=window.webpackJsonp||[]).push([[69],{201:function(s,t,a){"use strict";a.r(t);var e=a(0),n=Object(e.a)({},(function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h1",{attrs:{id:"前后端分离的项目如何进行-seo-优化"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#前后端分离的项目如何进行-seo-优化"}},[s._v("#")]),s._v(" 前后端分离的项目如何进行 SEO 优化")]),s._v(" "),a("p",[s._v("前后端分离能带来很多的好处，比如前端不需要再安装各种后端的环境，不需要跑后端项目，遇到报错也不需要再跑去找后端小哥哥定位问题了。 当然也带来了一些问题，比如页面需要 SEO，这个就有点小尴尬了。")]),s._v(" "),a("p",[s._v("当然想要 SEO，那就可以让它有 SEO 的功能。")]),s._v(" "),a("blockquote",[a("p",[s._v("比较完美的解决方案是做成 SSR，但是比较麻烦。 这里不讨论 SSR 怎么实现。")])]),s._v(" "),a("h2",{attrs:{id:"一、原理概述"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#一、原理概述"}},[s._v("#")]),s._v(" 一、原理概述")]),s._v(" "),a("p",[s._v("先讲解一些，纯前端项目如何拥有 SEO 的效果。")]),s._v(" "),a("h3",{attrs:{id:"_1-1、seo-是什么？"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-1、seo-是什么？"}},[s._v("#")]),s._v(" 1.1、SEO 是什么？")]),s._v(" "),a("p",[a("code",[s._v("SEO")]),s._v(" 是英文 "),a("code",[s._v("Search Engine Optimization")]),s._v(" 的缩写，中文译为“"),a("strong",[s._v("搜索引擎优化")]),s._v("”。")]),s._v(" "),a("p",[s._v("为什么需要搜索引擎优化呢？ 网站的数量非常多，但是你又不想去记住，什么问题应该去什么网站。 这个时候搜索引擎就可以帮你了，比如（谷歌，bing，百度）。 你输入你想要了解的内容，然后就出现一系列相关的内容了。")]),s._v(" "),a("p",[s._v("这些相关的一堆内容哪来的呢？是搜索引擎的爬虫一个一个爬回来并存起来。然后经过一系列的数据处理，最终就成了我们搜索某个关键字后，给我们展现的内容了。（有兴趣可以找一些相关文章深入了解一下）。")]),s._v(" "),a("p",[s._v("搜索引擎的爬虫也是会挑食的，不是什么东西（网站）都吃（爬）。因此 SEO 就来了，把你的网站做成爬虫想要的口味。")]),s._v(" "),a("h3",{attrs:{id:"_1-2、为什么纯前端项目不利于-seo？"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-2、为什么纯前端项目不利于-seo？"}},[s._v("#")]),s._v(" 1.2、为什么纯前端项目不利于 SEO？")]),s._v(" "),a("p",[s._v("现在 "),a("code",[s._v("React")]),s._v("，"),a("code",[s._v("Vue")]),s._v(" 非常流行，页面都是通过 js 渲染生成的。 意思就是，爬虫来的时候，发现爬到的页面时这样的。")]),s._v(" "),a("div",{staticClass:"language-html line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-html"}},[a("code",[a("span",{pre:!0,attrs:{class:"token doctype"}},[s._v("<!DOCTYPE html>")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("html")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("lang")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')]),s._v("en"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("head")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v(" "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("head")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("body")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("div")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("id")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')]),s._v("app"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("loading..."),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("div")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("body")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("html")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br")])]),a("blockquote",[a("p",[s._v("页面由 js 生成，在注入到 "),a("code",[s._v('<div id="app"></div>')]),s._v(" 中，因此爬虫访问到的是空的页面。")]),s._v(" "),a("p",[s._v("这里得说明一下，google 的爬虫是会抓取这种 JS 渲染的页面的，但是百度的爬虫，不吃这一套。")]),s._v(" "),a("p",[s._v("因此在国内，纯前端项目 SEO 效果就非常差了。")])]),s._v(" "),a("p",[s._v("爬虫一看爬取的内容，什么毛线网站的，什么有营养的东西都没有，不吃，吐掉了。因此你的页面就不会被搜索引擎收录了，其他人在搜索内容，也找不到你的内容了。")]),s._v(" "),a("h3",{attrs:{id:"_1-3、如何解决这个问题呢？"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-3、如何解决这个问题呢？"}},[s._v("#")]),s._v(" 1.3、如何解决这个问题呢？")]),s._v(" "),a("p",[s._v("解决这个问题就投其所好呗。")]),s._v(" "),a("p",[s._v("既然百度爬虫不抓取 "),a("code",[s._v("CSR")]),s._v("（"),a("strong",[s._v("Client Server Render 客户端渲染")]),s._v("，就是请求完 JS 渲染出页面的形式） 页面。那么把 JS 渲染后的页面，返回给爬虫咯。")]),s._v(" "),a("p",[s._v("处理步骤：")]),s._v(" "),a("ol",[a("li",[s._v("爬虫/用户 访问网站")]),s._v(" "),a("li",[s._v("nginx 判断是否为爬虫，因为爬虫会带着『我是爬虫』（比如百度爬虫会带着 Baiduspider）的标识。（nginx 如何配置，可以找找资料，这里就不想洗讲了）")]),s._v(" "),a("li",[s._v("不是爬虫，用户访问则正常打开网站")]),s._v(" "),a("li",[s._v("是爬虫，就返回 CSR 渲染后的页面内容给它，满足它")])]),s._v(" "),a("p",[s._v("这里怎么拿到 CSR 渲染后的页面，我们拧出来单独讲。")]),s._v(" "),a("h2",{attrs:{id:"二、获取-csr-渲染后的页面内容"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#二、获取-csr-渲染后的页面内容"}},[s._v("#")]),s._v(" 二、获取 CSR 渲染后的页面内容")]),s._v(" "),a("p",[s._v("上面我们已经了解到，怎么才能满足爬虫，需要拿到 CSR 渲染后的页面。")]),s._v(" "),a("p",[a("strong",[s._v("CSR 的页面，也称 动态页面")]),s._v("，就是页面的内容，可能是根据 JS 请求接口，拿到数据，在生成的页面。")]),s._v(" "),a("p",[s._v("动态页面，使用常规的爬虫，是爬取不到渲染后的内容的。 这里需要用到一个东西， google 的 **puppeteer (无界面浏览器) **，就是一个没有页面的浏览器。")]),s._v(" "),a("p",[s._v("让这个 Puppeteer 打开我们的 CSR 页面，然后等它加载完成页面，再把 HTML 来出来给爬虫。")]),s._v(" "),a("h3",{attrs:{id:"_2-1、使用-prerender-来获取-csr-页面内容"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-1、使用-prerender-来获取-csr-页面内容"}},[s._v("#")]),s._v(" 2.1、使用 prerender 来获取 CSR 页面内容")]),s._v(" "),a("p",[s._v("这个库已经帮你封装了以下几个部分。")]),s._v(" "),a("ol",[a("li",[s._v("获取页面地址")]),s._v(" "),a("li",[s._v("使用 puppeteer 打开 页面")]),s._v(" "),a("li",[s._v("页面加载完成后，返回 html 的内容")])]),s._v(" "),a("blockquote",[a("p",[s._v("解释一下：pretender 使用的是 "),a("code",[s._v("chrome-remote-interface")]),s._v(" 这个东西去打开页面，获取 JS 渲染后的 HTML 页面的。")]),s._v(" "),a("p",[a("code",[s._v("chrome-remote-interface")]),s._v(" 可以理解为 "),a("code",[s._v("puppeteer")]),s._v(" 中的某个功能，简化版。")])]),s._v(" "),a("p",[s._v("运行下面这个命令，可以尝试 prerender 的使用。")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Run these commands")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" clone https://github.com/prerender/prerender.git\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" prerender\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v("\nnode server.js\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br")])]),a("p",[s._v("详细了解，看这个文档 https://prerender.io/documentation 。")]),s._v(" "),a("p",[s._v("启动起来 Prerender 服务后，再配置 nginx 识别爬虫，并转发到 Prerender 服务。")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("location ^~ /webpath/ "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("set")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$prerender")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$http_user_agent")]),s._v(" ~* "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"baiduspider|twitterbot|facebookexternalhit|rogerbot|embedly|quora link preview|showyoubot|outbrain|pinterest|slackbot|vkShare|W3C_Validator"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("set")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$prerender")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 谷歌推荐的配置方式,可要可不要")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$args")]),s._v(" ~ "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"_escaped_fragment_"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("set")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$prerender")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$prerender")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 官方推荐通过$prerender变量来进行跳转来解决NGINX缓存")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("set")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$prerender")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"127.0.0.1:3000"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n      rewrite .* /"),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$scheme")]),s._v("://"),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$host")]),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$request_uri")]),s._v("? "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("break")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n      proxy_pass http://"),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$prerender")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 此处，我们假设主页面html为 /index.html")]),s._v("\n  try_files "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$uri")]),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$args")]),s._v(" /index.html"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br")])]),a("h3",{attrs:{id:"_2-2、如果你不用-prerender-呢？"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-2、如果你不用-prerender-呢？"}},[s._v("#")]),s._v(" 2.2、如果你不用 prerender 呢？")]),s._v(" "),a("p",[s._v("如果这个是一个面试题，你说了 "),a("code",[s._v("prerender")]),s._v(" 可以实现，面试官问你，不用 "),a("code",[s._v("prerender")]),s._v(" 你能实现吗？")]),s._v(" "),a("p",[s._v("那是必须能实现的，也就是实现 prerender 的功能即可。 那么我们可以用 prerender 一样的 "),a("code",[s._v("chrome-remote-interface")]),s._v(" 或者 "),a("code",[s._v("puppeteer")]),s._v(" 来获取 CSR 页面的内容都是可以的。")]),s._v(" "),a("p",[s._v("再实现这个的时候，顺便考虑一个点，你是等爬虫来了再现场去抓取页面，还是提前抓取存起来呢？")]),s._v(" "),a("h3",{attrs:{id:"_2-3、预先抓取页面-or-实时抓取页面"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-3、预先抓取页面-or-实时抓取页面"}},[s._v("#")]),s._v(" 2.3、预先抓取页面 OR 实时抓取页面")]),s._v(" "),a("p",[s._v("各有优劣，具体选择看情况，也可以两者结合使用。")]),s._v(" "),a("p",[s._v("预先抓取")]),s._v(" "),a("ul",[a("li",[s._v("可以快速返回给爬虫")]),s._v(" "),a("li",[s._v("麻烦，需要实现缓存这一块（怎么存储，多久更新缓存，未命中缓存怎么处理）")])]),s._v(" "),a("p",[s._v("实时抓取")]),s._v(" "),a("ul",[a("li",[s._v("爬虫每次拿到都是最新的")]),s._v(" "),a("li",[s._v("生成 CSR 页面速度可能很慢")])]),s._v(" "),a("h3",{attrs:{id:"三、参考文章"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#三、参考文章"}},[s._v("#")]),s._v(" 三、参考文章")]),s._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"https://www.zhihu.com/question/52235652",target:"_blank",rel:"noopener noreferrer"}},[s._v("前端后端分离，怎么解决 SEO 优化的问题呢？"),a("OutboundLink")],1)]),s._v(" "),a("li",[a("a",{attrs:{href:"%5Bhttp://codingfishman.github.io/2016/05/06/prerender%E9%A2%84%E6%B8%B2%E6%9F%93%E4%BC%98%E5%8C%96SEO/%5D(http://codingfishman.github.io/2016/05/06/prerender%E9%A2%84%E6%B8%B2%E6%9F%93%E4%BC%98%E5%8C%96SEO/)"}},[s._v("Prerender 预渲染优化 SEO")])])])])}),[],!1,null,null,null);t.default=n.exports}}]);