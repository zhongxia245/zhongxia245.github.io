(window.webpackJsonp=window.webpackJsonp||[]).push([[56],{191:function(s,n,a){"use strict";a.r(n);var t=a(0),e=Object(t.a)({},(function(){var s=this,n=s.$createElement,a=s._self._c||n;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h1",{attrs:{id:"从零配置一个-https-网站"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#从零配置一个-https-网站"}},[s._v("#")]),s._v(" 从零配置一个 https 网站")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://ws1.sinaimg.cn/large/006tNc79gy1fn5oylkmdzj30j6034748.jpg",alt:""}})]),s._v(" "),a("h2",{attrs:{id:"一、申请一个-https-证书"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#一、申请一个-https-证书"}},[s._v("#")]),s._v(" 一、申请一个 https 证书")]),s._v(" "),a("p",[s._v("可以去腾讯云申请一个免费的证书(DV SSL 证书)")]),s._v(" "),a("p",[s._v("https://console.qcloud.com/ssl")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://ws3.sinaimg.cn/large/006tNc79gy1fn5om1op5yj31940skwgd.jpg",alt:""}})]),s._v(" "),a("h2",{attrs:{id:"二、nginx-配置-https-解析"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#二、nginx-配置-https-解析"}},[s._v("#")]),s._v(" 二、Nginx 配置 Https 解析")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 登录云服务器")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("ssh")]),s._v(" xxxx@xxx\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看nginx位置")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("whereis")]),s._v(" nginx\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 修改配置nginx配置文件")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("vim")]),s._v(" nginx.conf\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 验证配置文件是否正常")]),s._v("\nnginx -t\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 重启nginx")]),s._v("\nnginx -s reload\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br")])]),a("h3",{attrs:{id:"_2-1-修改-nginx-conf"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-1-修改-nginx-conf"}},[s._v("#")]),s._v(" 2.1 修改 nginx.conf")]),s._v(" "),a("p",[s._v("配置 https 解析，并且把 80 端口自动重定向到 443 端口")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("user  zhongxia;\nworker_processes  1;\n\nevents {\n    worker_connections  1024;\n}\n\nhttp {\n    include       mime.types;\n    default_type  application/octet-stream;\n\n    sendfile        on;\n\n    #keepalive_timeout  0;\n    keepalive_timeout  65;\n\n    gzip  on;\n\n    # http自动重定向到https\n    server {\n        listen 80;\n        server_name www.izhongxia.com;\n        rewrite ^(.*)$  https://$host$1 permanent;\n    }\n\n    server {\n        listen 443;\n        server_name www.izhongxia.com;          #填写绑定证书的域名\n        ssl on;\n        ssl_certificate     /usr/local/nginx/conf/certificate/1_www.izhongxia.com_bundle.crt;   # 证书地址\n        ssl_certificate_key /usr/local/nginx/conf/certificate/2_www.izhongxia.com.key;   # 证书地址\n        ssl_session_timeout 5m;\n        ssl_protocols TLSv1 TLSv1.1 TLSv1.2;        #按照这个协议配置\n        ssl_ciphers ECDHE-RSA-AES128-GCM-SHA256:HIGH:!aNULL:!MD5:!RC4:!DHE;#按照这个套件配置\n        ssl_prefer_server_ciphers on;\n\n        location / {\n            root   /home/zhongxia/git/release-blog/;\n            index  index.html index.htm;\n        }\n    }\n}\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br"),a("span",{staticClass:"line-number"},[s._v("27")]),a("br"),a("span",{staticClass:"line-number"},[s._v("28")]),a("br"),a("span",{staticClass:"line-number"},[s._v("29")]),a("br"),a("span",{staticClass:"line-number"},[s._v("30")]),a("br"),a("span",{staticClass:"line-number"},[s._v("31")]),a("br"),a("span",{staticClass:"line-number"},[s._v("32")]),a("br"),a("span",{staticClass:"line-number"},[s._v("33")]),a("br"),a("span",{staticClass:"line-number"},[s._v("34")]),a("br"),a("span",{staticClass:"line-number"},[s._v("35")]),a("br"),a("span",{staticClass:"line-number"},[s._v("36")]),a("br"),a("span",{staticClass:"line-number"},[s._v("37")]),a("br"),a("span",{staticClass:"line-number"},[s._v("38")]),a("br"),a("span",{staticClass:"line-number"},[s._v("39")]),a("br"),a("span",{staticClass:"line-number"},[s._v("40")]),a("br"),a("span",{staticClass:"line-number"},[s._v("41")]),a("br"),a("span",{staticClass:"line-number"},[s._v("42")]),a("br")])]),a("h2",{attrs:{id:"三、可能遇见的问题"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#三、可能遇见的问题"}},[s._v("#")]),s._v(" 三、可能遇见的问题")]),s._v(" "),a("h3",{attrs:{id:"_3-1-nginx-找不到-ssl-模块"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-1-nginx-找不到-ssl-模块"}},[s._v("#")]),s._v(" 3.1 nginx 找不到 ssl 模块")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("# 找到nginx的源码，重新构建\n--with-http_ssl_module\n\n# 如果找不到源码，重新下载一个\n# 查看 nginx版本，如果为1.7.4\nnginx -V\n# 则下载源码下来\nwget http://nginx.org/download/nginx-1.7.4.tar.gz\n\n# 解压,并进入目录\n./configure --with-http_ssl_module\n\nmake\n\n# 会覆盖旧的版本, 可以进入 /usr/local/nginx/sbin rename nginx => ngxin.old\nmake install  \n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br")])]),a("h3",{attrs:{id:"_3-2-刚配置好后，https-可以访问网站，但是-chrome-提示不安全"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-2-刚配置好后，https-可以访问网站，但是-chrome-提示不安全"}},[s._v("#")]),s._v(" 3.2 刚配置好后，https 可以访问网站，但是 chrome 提示不安全")]),s._v(" "),a("p",[s._v("在其他浏览器访问一下，在来 chrome 访问，然后居然可以了。 具体原因未知")])])}),[],!1,null,null,null);n.default=e.exports}}]);