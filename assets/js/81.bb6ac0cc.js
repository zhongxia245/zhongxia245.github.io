(window.webpackJsonp=window.webpackJsonp||[]).push([[81],{213:function(t,e,a){"use strict";a.r(e);var s=a(0),r=Object(s.a)({},(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"next-js-踩坑指南"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#next-js-踩坑指南"}},[t._v("#")]),t._v(" Next.js 踩坑指南")]),t._v(" "),a("p",[t._v("next.js 是一个 react ssr 的框架，可以很方便的来实现 ReactSSR，对于需要 SEO 的需求来说，这个是很好用的。并且社区资源也很丰富，搜索资料也比较多。")]),t._v(" "),a("p",[t._v("但是总会有一些坑，需要填过，才深有体会，这里汇总一些填坑指南。")]),t._v(" "),a("h2",{attrs:{id:"一、入门"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#一、入门"}},[t._v("#")]),t._v(" 一、入门")]),t._v(" "),a("p",[t._v("官网是最好的入门手册，跟着 "),a("a",{attrs:{href:"https://nextjs.org/learn/basics/getting-started",target:"_blank",rel:"noopener noreferrer"}},[t._v("《官网入门手册》"),a("OutboundLink")],1),t._v("来过 一遍，你对 Next.js 就有了一个基本的了解和使用。")]),t._v(" "),a("blockquote",[a("p",[t._v("这块没有什么难点，跟着文档走下去即可，文档是英文的，不过很通俗易懂。")])]),t._v(" "),a("h2",{attrs:{id:"二、各种场景的处理方案"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#二、各种场景的处理方案"}},[t._v("#")]),t._v(" 二、各种场景的处理方案")]),t._v(" "),a("p",[t._v("next.js 提供了很多插件来支持各种场景。 具体有什么插件可以看 "),a("a",{attrs:{href:"https://github.com/zeit/next-plugins",target:"_blank",rel:"noopener noreferrer"}},[t._v("《这里》"),a("OutboundLink")],1),t._v("。")]),t._v(" "),a("p",[t._v("同样的 next.js 也提供了很多 example 案例， 具体看"),a("a",{attrs:{href:"https://github.com/zeit/next.js/blob/canary/examples/",target:"_blank",rel:"noopener noreferrer"}},[t._v("《这里》"),a("OutboundLink")],1)]),t._v(" "),a("blockquote",[a("p",[t._v("多看看这里，可以解决大部分问题")])]),t._v(" "),a("h3",{attrs:{id:"_2-1、样式处理"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-1、样式处理"}},[t._v("#")]),t._v(" 2.1、样式处理")]),t._v(" "),a("p",[t._v("next.js 默认使用的是 "),a("code",[t._v("style-jsx")]),t._v(", "),a("code",[t._v("css in js")]),t._v("的一种。 用来页面开发是完全够用的，只是如果还需要使用 less，css 之类的，需要单独处理。")]),t._v(" "),a("p",[t._v("看这里 "),a("a",{attrs:{href:"https://github.com/zeit/next.js/blob/canary/examples/with-next-less/next.config.js",target:"_blank",rel:"noopener noreferrer"}},[t._v("less使用案例"),a("OutboundLink")],1)]),t._v(" "),a("p",[t._v("官网提供了 一下几个插件来支持样式处理。")]),t._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"https://github.com/zeit/next-plugins/blob/master/packages/next-css",target:"_blank",rel:"noopener noreferrer"}},[t._v("@zeit/next-css"),a("OutboundLink")],1)]),t._v(" "),a("li",[a("a",{attrs:{href:"https://github.com/zeit/next-plugins/blob/master/packages/next-sass",target:"_blank",rel:"noopener noreferrer"}},[t._v("@zeit/next-sass"),a("OutboundLink")],1)]),t._v(" "),a("li",[a("a",{attrs:{href:"https://github.com/zeit/next-plugins/blob/master/packages/next-less",target:"_blank",rel:"noopener noreferrer"}},[t._v("@zeit/next-less"),a("OutboundLink")],1)]),t._v(" "),a("li",[a("a",{attrs:{href:"https://github.com/zeit/next-plugins/blob/master/packages/next-stylus",target:"_blank",rel:"noopener noreferrer"}},[t._v("@zeit/next-stylus"),a("OutboundLink")],1)])]),t._v(" "),a("h3",{attrs:{id:"_2-2、引入-antd、antd-mobile-组件库"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-2、引入-antd、antd-mobile-组件库"}},[t._v("#")]),t._v(" 2.2、引入 antd、antd-mobile 组件库")]),t._v(" "),a("p",[t._v("常规开发中，引入一个组件库会方便很多，没必要再次写通用组件。")]),t._v(" "),a("p",[t._v("但是在 next.js 引入 "),a("code",[t._v("antd , antd-mobile")]),t._v("  也 常规 CSR 不太一样，因为 SSR 需要在 node 中支持 css。")]),t._v(" "),a("p",[t._v("and-mobile 引入，必须支持 css 样式，如果只引入 less 是不行的， 因为 "),a("code",[t._v("antd-mobile")]),t._v(" 引入了"),a("code",[t._v("normalize.css")])]),t._v(" "),a("blockquote",[a("p",[t._v("所以如果只支持 less 的话，会报错。")])]),t._v(" "),a("p",[t._v("具体如何操作，看这里 "),a("a",{attrs:{href:"https://github.com/zeit/next.js/blob/canary/examples/with-antd-mobile/next.config.js",target:"_blank",rel:"noopener noreferrer"}},[t._v("antd-mobile 引入方式"),a("OutboundLink")],1)]),t._v(" "),a("blockquote",[a("p",[t._v("antd 引入，同理去这个地址找， 找 antd 的 example 。")])]),t._v(" "),a("h3",{attrs:{id:"_2-3、页面loading"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-3、页面loading"}},[t._v("#")]),t._v(" 2.3、页面loading")]),t._v(" "),a("p",[t._v("next.js 是一个 单页面 SSR , 因此再页面跳转的时候，加一个页面 Loading 效果，会好很多。")]),t._v(" "),a("p",[t._v("具体实现实现看 "),a("a",{attrs:{href:"https://github.com/zeit/next.js/blob/canary/examples/with-loading/pages/_app.js",target:"_blank",rel:"noopener noreferrer"}},[t._v("《这里》"),a("OutboundLink")],1)]),t._v(" "),a("p",[a("img",{attrs:{src:"https://tva1.sinaimg.cn/large/0082zybpgy1gbnuwft25tj30qu056mx3.jpg",alt:""}})]),t._v(" "),a("h2",{attrs:{id:"三、坑"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#三、坑"}},[t._v("#")]),t._v(" 三、坑")]),t._v(" "),a("p",[t._v("能解决的坑，都不是坑。")]),t._v(" "),a("h3",{attrs:{id:"_3-1、样式导致页面跳转问题"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-1、样式导致页面跳转问题"}},[t._v("#")]),t._v(" 3.1、样式导致页面跳转问题")]),t._v(" "),a("p",[t._v("**现象：**当 A 页面应用外部样式，B 页面没有使用外部样式。 浏览器直接打开 B 页面，然后这个时候点击跳转去 A 页面，会跳转不过去。（开发环境出现）")]),t._v(" "),a("p",[a("strong",[t._v("解决方案：")]),t._v(" 使用一个 Layout 布局，然后 Layout 引入外部样式，也可以自己写一个  Layout.less 的样式文件，这样所有页面都有引入外部样式，这个时候就没有问题。")]),t._v(" "),a("blockquote",[a("p",[t._v("具体原理还不太清楚，但是 next.js 会把所有 css 都打包成一个文件。")])])])}),[],!1,null,null,null);e.default=r.exports}}]);